"use strict";(self.webpackChunksplitexpenses=self.webpackChunksplitexpenses||[]).push([[998],{998:(Me,A,d)=>{d.r(A),d.d(A,{DebtsModule:()=>Vt});var _=d(4361),g=d(9823),k=d(9404),v=d(6530),Ee=d(2505);const R=(0,g.ZF)("debts"),x=(0,g.P1)(R,n=>n.debts),Fe=(0,g.P1)(x,n=>Array.from(n.values())),ie=(0,g.PH)("[Debts] Update debts",(0,g.Ky)());var Ae=d(7913),Ie=d(3940),e=d(1498);let re=(()=>{class n{constructor(t){this.store=t,this.debts=new Map,this.debtTracing=[],(0,Ee.a)([this.store.select(Ae.YN),this.store.select(Ie.f_)]).subscribe(([o,s])=>{o.size&&s.length&&this.initialize(o,s)})}updateDebts(t){this.store.dispatch(ie({debts:t}))}getDebts(){return this.store.select(x)}getUserByID(t){return this.store.select((n=>(0,g.P1)(x,r=>r.get(n)))(t))}getIterableDebts(){return this.store.select(Fe)}initialize(t,o){this.createStructure(t),this.calcDebt(o),this.settleCrossAccountDebts(t),this.updateDebts(this.debts)}getDebtTracing(){return this.debtTracing}createStructure(t){const o=new Map;t.forEach(s=>{const i=this.createDebtObj();t.forEach(a=>{if(a&&s.id!==a.id){const l=this.createIndividualDebtObj();i.debts.set(a.id,l)}}),o.set(s.id,i)}),this.debts=new Map([...o])}createDebtObj(){return{debts:new Map,totalIveBeenPaid:0,totalIPaid:0,totalIowe:0}}createIndividualDebtObj(){return{individualtotalIveBeenPaid:0,newDebt:0,RefDebtsIds:[]}}calcDebt(t){for(const o of t)this.updateExpenseDebt(o)}settleCrossAccountDebts(t){this.debtTracing=[],this.debts.forEach((o,s)=>{o.debts.forEach((i,a)=>{let l=i.newDebt;l>0&&new Map([...this.debts].filter(([h])=>h!==s&&h!==a)).forEach((h,u)=>{const m=h.debts.get(s)?.newDebt||0;if(m>0){let f=Math.min(l,m);const D=this.debts.get(a)?.debts.get(u)?.newDebt||0;D>0&&m<D&&(f=Math.min(l,D)),this.traceOfAutoSettlement({debtorId:s,lenderId:a,intermediaryId:u,debtorDebt:l,intermediaryDebtToDebtor:m,lenderDebtToIntermediary:D,amount:f},t),h.debts.get(s).newDebt-=f,h.debts.get(a).newDebt+=f,o.debts.get(u).newDebt+=f,i.newDebt-=f,this.debts.get(a).debts.get(s).newDebt+=f,this.debts.get(a).debts.get(u).newDebt-=f,l=i.newDebt}})})})}traceOfAutoSettlement(t,o){const s=o.get(t.debtorId).name,i=o.get(t.lenderId).name,a=o.get(t.intermediaryId).name,{debtorDebt:l,intermediaryDebtToDebtor:c,lenderDebtToIntermediary:h}=t;t.debtorId=s,t.lenderId=i,t.intermediaryId=a,l>c&&h>c&&(t.debtorId=i,t.lenderId=a,t.intermediaryId=s,t.debtorDebt=h,t.lenderDebtToIntermediary=c,t.intermediaryDebtToDebtor=l),t.finalDebtorDebt=t.debtorDebt-t.amount,t.finalLenderDebt=Math.abs(t.lenderDebtToIntermediary-t.amount),t.finalIntermediaryDebt=t.intermediaryDebtToDebtor-t.amount,this.debtTracing.push(t)}updateExpenseDebt(t){this.updatePayerDebt(t);const{sharedBy:o}=t;o.forEach(s=>{this.updateDebtorDebt(s,t)}),this.calcDirectDebtsDiff()}updatePayerDebt(t){const{paidBy:o}=t,s=this.debts.get(o);if(!s)throw new Error(`El pagador con ID '${o}' no est\xe1 definido.`);s.totalIPaid=this.calcTotalAmountIpaid(o,t,s.totalIPaid)}updateDebtorDebt(t,o){const{paidBy:s}=o,i=this.debts.get(t);if(!i)throw new Error(`El deudor con ID ${t} no est\xe1 definido.`);s!==t&&(i.totalIveBeenPaid=this.calcTotalAmountIhaveBeenPaid(t,o,i.totalIveBeenPaid));const a=i.debts.get(s);a&&(a.individualtotalIveBeenPaid=this.calcTotalAmountIhaveBeenPaid(t,o,a.individualtotalIveBeenPaid)),i.debts.get(s)?.RefDebtsIds.push(o)}calcDirectDebtsDiff(){this.debts.forEach((t,o)=>{t.totalIowe=0,t.debts.forEach((s,i)=>{const a=s.individualtotalIveBeenPaid,l=this.debts.get(i)?.debts.get(o)?.individualtotalIveBeenPaid||0;s.newDebt=a-l,t.totalIowe=t.totalIowe+s.newDebt})})}calcTotalAmountIpaid(t,o,s){const i=o.sharedBy.includes(t);return s+o.originalCost-(i?o.cost:0)}verifyTotalAmountIPaid(t){let o=0;return this.debts.forEach((s,i)=>{t!==i&&(o+=s.debts.get(t)?.individualtotalIveBeenPaid||0)}),o}calcTotalAmountIhaveBeenPaid(t,o,s){let a=s;return!o.settleBy.includes(t)&&(a+=o.cost),a}verifyTotalAmountIhaveBeenPaid(t){let o=0;return this.debts.get(t)?.debts.forEach(s=>{o+=s.individualtotalIveBeenPaid}),o}calcTotalAmountIAmOwed(t,o){return t.totalIowe+o}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(g.yh))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae=d(4099);function Ne(n,r){1&n&&(e.TgZ(0,"h2",2),e.SDv(1,3),e.qZA())}function Be(n,r){if(1&n&&(e.TgZ(0,"section",4)(1,"div",5)(2,"h3",5),e.SDv(3,6),e.qZA(),e.TgZ(4,"div",7),e.tHW(5,8),e._UZ(6,"strong"),e.ALo(7,"number"),e.N_p(),e.qZA()(),e.TgZ(8,"div",9)(9,"div",10),e._uU(10),e.qZA(),e.TgZ(11,"div",11)(12,"div",12),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"div",13),e._uU(16),e.ALo(17,"number"),e.qZA(),e._UZ(18,"div",14),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.qZA()(),e.TgZ(21,"div",9)(22,"div",10),e._uU(23),e.qZA(),e.TgZ(24,"div",11)(25,"div",12),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"div",13),e._uU(29),e.ALo(30,"number"),e.qZA(),e._UZ(31,"div",14),e.qZA(),e.TgZ(32,"div",15),e._uU(33),e.qZA()(),e.TgZ(34,"div",9)(35,"div",10),e._uU(36),e.qZA(),e.TgZ(37,"div",11)(38,"div",12),e._uU(39),e.ALo(40,"number"),e.qZA(),e.TgZ(41,"div",13),e._uU(42),e.ALo(43,"number"),e.qZA(),e._UZ(44,"div",14),e.qZA(),e.TgZ(45,"div",15),e._uU(46),e.qZA()()()),2&n){const t=r.$implicit,o=r.index,s=e.oxw();e.xp6(3),e.pQV(o+1)(s.debtTracing.length),e.QtT(3),e.xp6(4),e.pQV(t.intermediaryId)(t.debtorId)(e.xi3(7,24,t.intermediaryDebtToDebtor,".0-2"))(s.currency.currencySymbol),e.QtT(5),e.xp6(3),e.Oqu(t.intermediaryId),e.xp6(3),e.AsE(" ",e.xi3(14,27,t.finalIntermediaryDebt,".0-2"),"",s.currency.currencySymbol," "),e.xp6(3),e.AsE(" ",e.xi3(17,30,t.intermediaryDebtToDebtor,".0-2"),"",s.currency.currencySymbol," "),e.xp6(4),e.Oqu(t.debtorId),e.xp6(3),e.Oqu(t.intermediaryId),e.xp6(3),e.AsE(" ",e.xi3(27,33,t.finalLenderDebt,".0-2"),"",s.currency.currencySymbol," "),e.xp6(3),e.AsE(" ",e.xi3(30,36,t.lenderDebtToIntermediary,".0-2"),"",s.currency.currencySymbol," "),e.xp6(4),e.Oqu(t.lenderId),e.xp6(3),e.Oqu(t.debtorId),e.xp6(3),e.AsE(" ",e.xi3(40,39,t.finalDebtorDebt,".0-2"),"",s.currency.currencySymbol," "),e.xp6(3),e.AsE(" ",e.xi3(43,42,t.debtorDebt,".0-2"),"",s.currency.currencySymbol," "),e.xp6(4),e.Oqu(t.lenderId)}}let Pe=(()=>{class n{constructor(t){this.currencyService=t,this.debtTracing=[],this.currency=this.currencyService.getCurrencySettings()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(v.i))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-debt-tracing"]],inputs:{debtTracing:"debtTracing"},decls:2,vars:2,consts:()=>{let t,o,s;return t=" Como se han calculado las deudas\n",o=" Paso " + "\ufffd0\ufffd" + " de " + "\ufffd1\ufffd" + " ",s=" " + "\ufffd0\ufffd" + " asume las deudas de " + "\ufffd1\ufffd" + " porque le debia " + "\ufffd#6\ufffd" + "" + "\ufffd2\ufffd" + "" + "\ufffd3\ufffd" + "" + "\ufffd/#6\ufffd" + "",[["class","my-5 text-center",4,"ngIf"],["class","g-4 row mt-4 card",4,"ngFor","ngForOf"],[1,"my-5","text-center"],t,[1,"g-4","row","mt-4","card"],[1,"card-title"],o,[1,"card-description"],s,[1,"container"],[1,"item","first"],[1,"element"],[1,"current-debt"],[1,"old-debt"],[1,"triangle"],[1,"item","last"]]},template:function(o,s){1&o&&e.YNc(0,Ne,2,0,"h2",0)(1,Be,47,45,"section",1),2&o&&(e.Q6J("ngIf",s.debtTracing.length),e.xp6(),e.Q6J("ngForOf",s.debtTracing))},dependencies:[_.sg,_.O5,_.JJ],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.item[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:#e2e2e2;font-size:1.5rem}.element[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:0;height:3px;display:flex;justify-content:center;align-items:center;background-color:#cfcdcd;flex-direction:column}.triangle[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-left:10px solid #b9b8b8;transform:translateY(-50%)}.current-debt[_ngcontent-%COMP%]{font-size:1.4rem;margin-top:-8px}.old-debt[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:line-through}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;box-shadow:0 4px 16px #0003;display:flex;flex-direction:column;overflow:hidden;padding:16px}.card-title[_ngcontent-%COMP%]{color:#333;font-size:24px;margin:0 auto;text-align:center}.card-description[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem}"]})}return n})();var Le=d(3057);function Ze(n,r){if(1&n&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"number"),e.ALo(3,"exchange"),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2).ngIf,s=e.oxw();let i;e.xp6(),e.AsE(" ",e.xi3(2,2,e.lcZ(3,5,null==(i=o.get(t.id))?null:i.totalIowe),".0-2")," ",s.currency.currencyExchangeSymbol," ")}}function $e(n,r){if(1&n&&(e.TgZ(0,"small",18),e._uU(1),e.ALo(2,"number"),e.ALo(3,"exchange"),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw().$implicit,s=e.oxw(2).ngIf,i=e.oxw();let a,l;e.xp6(),e.AsE(" ",e.xi3(2,2,e.lcZ(3,5,null==(a=s.get(o.id))||null==a.debts||null==(l=a.debts.get(t.id))?null:l.newDebt),".0-2")," ",i.currency.currencyExchangeSymbol," ")}}function Ge(n,r){if(1&n&&(e.TgZ(0,"div",16)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"number"),e.YNc(6,$e,4,7,"small",17),e.qZA()()),2&n){const t=e.oxw().$implicit,o=e.oxw().$implicit,s=e.oxw(2).ngIf,i=e.oxw();let a,l;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.AsE(" ",e.xi3(5,4,null==(a=s.get(o.id))||null==a.debts||null==(l=a.debts.get(t.id))?null:l.newDebt,".0-2")," ",i.currency.currencySymbol," "),e.xp6(2),e.Q6J("ngIf",i.currency.active)}}function He(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ge,7,7,"div",15),e.BQk()),2&n){const t=r.$implicit,o=e.oxw().$implicit;e.xp6(),e.Q6J("ngIf",o.id!==t.id)}}function ze(n,r){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div",11),e._uU(6),e.ALo(7,"number"),e.YNc(8,Ze,4,7,"div",12),e.qZA()(),e.YNc(9,He,2,1,"ng-container",13),e.ALo(10,"async"),e.qZA()()),2&n){const t=r.$implicit,o=e.oxw(2).ngIf,s=e.oxw();let i;e.ekj("order-2",o.get(t.id).totalIowe<=0),e.xp6(4),e.Oqu(t.name),e.xp6(2),e.AsE(" ",e.xi3(7,7,null==(i=o.get(t.id))?null:i.totalIowe,".0-2")," ",s.currency.currencySymbol," "),e.xp6(2),e.Q6J("ngIf",s.currency.active),e.xp6(),e.Q6J("ngForOf",e.lcZ(10,10,s.users$))}}function Ye(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ze,11,12,"div",7),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(),e.Q6J("ngForOf",e.lcZ(2,1,t.users$))}}function je(n,r){if(1&n&&(e.TgZ(0,"section",5),e.YNc(1,Ye,3,3,"ng-container",6),e.qZA()),2&n){const t=r.ngIf;e.xp6(),e.Q6J("ngIf",t.size)}}let Ue=(()=>{class n{constructor(t,o,s){this.debtsService=t,this.userService=o,this.currencyService=s,this.debts$=this.debtsService.getDebts(),this.users$=this.userService.getIterableUsers(),this.currency=this.currencyService.getCurrencySettings(),this.debtTracing=this.debtsService.getDebtTracing()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(re),e.Y36(ae.f),e.Y36(v.i))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-debts"]],decls:6,vars:4,consts:()=>{let t;return t="Deudas",[[1,"container-md","mb-5"],[1,"my-4","text-center"],t,["class","row g-4",4,"ngIf"],[3,"debtTracing"],[1,"row","g-4"],[4,"ngIf"],["class","col-sm-12 col-lg-6 col-xxl-4",3,"order-2",4,"ngFor","ngForOf"],[1,"col-sm-12","col-lg-6","col-xxl-4"],["routerLink","/debts/details","data-cy","user-debt",1,"persoanlDebts","p-md-3","p-2"],[1,"d-flex","flex-row","justify-content-between","title"],[1,"totalIowe"],["class","text-end mainExchange",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-end","mainExchange"],["class","d-flex flex-row justify-content-between align-items-center text-secondary py-1 subtitle",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","align-items-center","text-secondary","py-1","subtitle"],["class","text-end",4,"ngIf"],[1,"text-end"]]},template:function(o,s){1&o&&(e.TgZ(0,"main",0)(1,"h2",1),e.SDv(2,2),e.qZA(),e.YNc(3,je,2,1,"section",3),e.ALo(4,"async"),e._UZ(5,"app-debt-tracing",4),e.qZA()),2&o&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,s.debts$)),e.xp6(2),e.Q6J("debtTracing",s.debtTracing))},dependencies:[_.sg,_.O5,k.rH,Pe,_.Ov,_.JJ,Le.u],styles:[".persoanlDebts[_ngcontent-%COMP%]{border:1px solid #1f2128;border-radius:7px;background:#fff;transition:all 1s ease}.persoanlDebts[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;padding-bottom:.6em;margin-bottom:.6em;border-bottom:1px solid}.persoanlDebts[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:small}.persoanlDebts[_ngcontent-%COMP%]   .mainExchange[_ngcontent-%COMP%]{font-size:medium}.persoanlDebts[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem}.persoanlDebts[_ngcontent-%COMP%]:hover, .persoanlDebts[_ngcontent-%COMP%]:active{border:1px solid;cursor:pointer;box-shadow:2px 2px #000}.totalIowe[_ngcontent-%COMP%]{color:#d84315;font-weight:bolder}.order-2[_ngcontent-%COMP%]   .totalIowe[_ngcontent-%COMP%]{color:initial;font-weight:initial}.list-group-item[_ngcontent-%COMP%]{display:flex;border:1px solid rgba(0,0,0,.125)}small[_ngcontent-%COMP%]{display:block}"]})}return n})();var qe=d(2241),Qe=d(2451),Xe=d(5402),p=d(3387),Je=d(5039),le=d(7137),ce=d(4451),We=d(982),Ve=d(402),Ke=d(591),de=d(4117),M=d(2274),ue=d(5473),et=d(1040);function tt(n,r){1&n&&e.Hsn(0,2)}function nt(n,r){1&n&&(e.TgZ(0,"thead",0),e.GkF(1,1),e.qZA(),e.TgZ(2,"tbody",0),e.GkF(3,2)(4,3),e.qZA(),e.TgZ(5,"tfoot",0),e.GkF(6,4),e.qZA())}function ot(n,r){1&n&&e.GkF(0,1)(1,2)(2,3)(3,4)}const st=[[["caption"]],[["colgroup"],["col"]],"*"],it=["caption","colgroup, col","*"];function Z(n){return class extends n{get sticky(){return this._sticky}set sticky(r){const t=this._sticky;this._sticky=(0,et.Ig)(r),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const r=this._hasStickyChanged;return this._hasStickyChanged=!1,r}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...r){super(...r),this._sticky=!1,this._hasStickyChanged=!1}}}const b=new e.OlP("CDK_TABLE");let T=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkCellDef",""]],standalone:!0})}return n})(),S=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}return n})(),I=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}return n})();class ct{}const dt=Z(ct);let w=(()=>{class n extends dt{get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){t!==this._stickyEnd&&(this._stickyEnd=t,this._hasStickyChanged=!0)}constructor(t){super(),this._table=t,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b,8))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(o,s,i){if(1&o&&(e.Suo(i,T,5),e.Suo(i,S,5),e.Suo(i,I,5)),2&o){let a;e.iGM(a=e.CRH())&&(s.cell=a.first),e.iGM(a=e.CRH())&&(s.headerCell=a.first),e.iGM(a=e.CRH())&&(s.footerCell=a.first)}},inputs:{sticky:"sticky",name:[e.lbL.None,"cdkColumnDef","name"],stickyEnd:[e.lbL.HasDecoratorInputTransform,"stickyEnd","stickyEnd",e.VuI]},standalone:!0,features:[e._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),e.Xq5,e.qOj]})}return n})();class ${constructor(r,t){t.nativeElement.classList.add(...r._columnCssClassName)}}let G=(()=>{class n extends ${constructor(t,o){super(t,o)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(w),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[e.qOj]})}return n})(),he=(()=>{class n extends ${constructor(t,o){super(t,o);const s=t._table?._getCellRole();s&&o.nativeElement.setAttribute("role",s)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(w),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["cdk-footer-cell"],["td","cdk-footer-cell",""]],hostAttrs:[1,"cdk-footer-cell"],standalone:!0,features:[e.qOj]})}return n})(),H=(()=>{class n extends ${constructor(t,o){super(t,o);const s=t._table?._getCellRole();s&&o.nativeElement.setAttribute("role",s)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(w),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[e.qOj]})}return n})();class fe{constructor(){this.tasks=[],this.endTasks=[]}}const z=new e.OlP("_COALESCED_STYLE_SCHEDULER");let me=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new ce.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new fe,this._getScheduleObservable().pipe((0,M.R)(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new fe;for(const o of t.tasks)o();for(const o of t.endTasks)o()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,We.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,ue.q)(1))}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(e.R0b))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})(),Y=(()=>{class n{constructor(t,o){this.template=t,this._differs=o}ngOnChanges(t){if(!this._columnsDiffer){const o=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(o).create(),this._columnsDiffer.diff(o)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof E?t.headerCell.template:this instanceof O?t.footerCell.template:t.cell.template}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc),e.Y36(e.ZZ4))};static#t=this.\u0275dir=e.lG2({type:n,features:[e.TTD]})}return n})();class ut extends Y{}const ht=Z(ut);let E=(()=>{class n extends ht{constructor(t,o,s){super(t,o),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc),e.Y36(e.ZZ4),e.Y36(b,8))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[e.lbL.None,"cdkHeaderRowDef","columns"],sticky:[e.lbL.None,"cdkHeaderRowDefSticky","sticky"]},standalone:!0,features:[e.qOj,e.TTD]})}return n})();class ft extends Y{}const mt=Z(ft);let O=(()=>{class n extends mt{constructor(t,o,s){super(t,o),this._table=s}ngOnChanges(t){super.ngOnChanges(t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc),e.Y36(e.ZZ4),e.Y36(b,8))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[e.lbL.None,"cdkFooterRowDef","columns"],sticky:[e.lbL.None,"cdkFooterRowDefSticky","sticky"]},standalone:!0,features:[e.qOj,e.TTD]})}return n})(),N=(()=>{class n extends Y{constructor(t,o,s){super(t,o),this._table=s}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc),e.Y36(e.ZZ4),e.Y36(b,8))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:[e.lbL.None,"cdkRowDefColumns","columns"],when:[e.lbL.None,"cdkRowDefWhen","when"]},standalone:!0,features:[e.qOj]})}return n})(),C=(()=>{class n{static#e=this.mostRecentCellOutlet=null;constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static#t=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.s_b))};static#n=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkCellOutlet",""]],standalone:!0})}return n})(),j=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),U=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-footer-row"],["tr","cdk-footer-row",""]],hostAttrs:["role","row",1,"cdk-footer-row"],standalone:!0,features:[e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),q=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),B=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}return n})();const _e=["top","bottom","left","right"];class _t{constructor(r,t,o,s,i=!0,a=!0,l){this._isNativeHtmlTable=r,this._stickCellCss=t,this.direction=o,this._coalescedStyleScheduler=s,this._isBrowser=i,this._needsPositionStickyOnElement=a,this._positionListener=l,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(r,t){const o=[];for(const s of r)if(s.nodeType===s.ELEMENT_NODE){o.push(s);for(let i=0;i<s.children.length;i++)o.push(s.children[i])}this._coalescedStyleScheduler.schedule(()=>{for(const s of o)this._removeStickyStyle(s,t)})}updateStickyColumns(r,t,o,s=!0){r.length&&this._isBrowser&&(t.some(i=>i)||o.some(i=>i))?this._coalescedStyleScheduler.schedule(()=>{const i=r[0],a=i.children.length,l=this._getCellWidths(i,s),c=this._getStickyStartColumnPositions(l,t),h=this._getStickyEndColumnPositions(l,o),u=t.lastIndexOf(!0),m=o.indexOf(!0),f="rtl"===this.direction,D=f?"right":"left",se=f?"left":"right";for(const F of r)for(let y=0;y<a;y++){const ke=F.children[y];t[y]&&this._addStickyStyle(ke,D,c[y],y===u),o[y]&&this._addStickyStyle(ke,se,h[y],y===m)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:l.slice(0,u+1).map((F,y)=>t[y]?F:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===m?[]:l.slice(m).map((F,y)=>o[y+m]?F:null).reverse()}))}):this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}))}stickRows(r,t,o){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{const s="bottom"===o?r.slice().reverse():r,i="bottom"===o?t.slice().reverse():t,a=[],l=[],c=[];for(let u=0,m=0;u<s.length;u++){if(!i[u])continue;a[u]=m;const f=s[u];c[u]=this._isNativeHtmlTable?Array.from(f.children):[f];const D=f.getBoundingClientRect().height;m+=D,l[u]=D}const h=i.lastIndexOf(!0);for(let u=0;u<s.length;u++){if(!i[u])continue;const m=a[u],f=u===h;for(const D of c[u])this._addStickyStyle(D,o,m,f)}"top"===o?this._positionListener?.stickyHeaderRowsUpdated({sizes:l,offsets:a,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:l,offsets:a,elements:c})})}updateStickyFooterContainer(r,t){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{const o=r.querySelector("tfoot");t.some(s=>!s)?this._removeStickyStyle(o,["bottom"]):this._addStickyStyle(o,"bottom",0,!1)})}_removeStickyStyle(r,t){for(const s of t)r.style[s]="",r.classList.remove(this._borderCellCss[s]);_e.some(s=>-1===t.indexOf(s)&&r.style[s])?r.style.zIndex=this._getCalculatedZIndex(r):(r.style.zIndex="",this._needsPositionStickyOnElement&&(r.style.position=""),r.classList.remove(this._stickCellCss))}_addStickyStyle(r,t,o,s){r.classList.add(this._stickCellCss),s&&r.classList.add(this._borderCellCss[t]),r.style[t]=`${o}px`,r.style.zIndex=this._getCalculatedZIndex(r),this._needsPositionStickyOnElement&&(r.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(r){const t={top:100,bottom:10,left:1,right:1};let o=0;for(const s of _e)r.style[s]&&(o+=t[s]);return o?`${o}`:""}_getCellWidths(r,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const o=[],s=r.children;for(let i=0;i<s.length;i++)o.push(s[i].getBoundingClientRect().width);return this._cachedCellWidths=o,o}_getStickyStartColumnPositions(r,t){const o=[];let s=0;for(let i=0;i<r.length;i++)t[i]&&(o[i]=s,s+=r[i]);return o}_getStickyEndColumnPositions(r,t){const o=[];let s=0;for(let i=r.length;i>0;i--)t[i]&&(o[i]=s,s+=r[i]);return o}}const Q=new e.OlP("CDK_SPL");let X=(()=>{class n{constructor(t,o){this.viewContainer=t,this.elementRef=o;const s=(0,e.f3M)(b);s._rowOutlet=this,s._outletAssigned()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.s_b),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","rowOutlet",""]],standalone:!0})}return n})(),J=(()=>{class n{constructor(t,o){this.viewContainer=t,this.elementRef=o;const s=(0,e.f3M)(b);s._headerRowOutlet=this,s._outletAssigned()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.s_b),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","headerRowOutlet",""]],standalone:!0})}return n})(),W=(()=>{class n{constructor(t,o){this.viewContainer=t,this.elementRef=o;const s=(0,e.f3M)(b);s._footerRowOutlet=this,s._outletAssigned()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.s_b),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","footerRowOutlet",""]],standalone:!0})}return n})(),V=(()=>{class n{constructor(t,o){this.viewContainer=t,this.elementRef=o;const s=(0,e.f3M)(b);s._noDataRowOutlet=this,s._outletAssigned()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.s_b),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","noDataRowOutlet",""]],standalone:!0})}return n})(),P=(()=>{class n{_getCellRole(){if(void 0===this._cellRoleInternal){const t=this._elementRef.nativeElement.getAttribute("role"),o="grid"===t||"treegrid"===t?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&"cell"===o?null:o}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=t,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=t,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(t,o,s,i,a,l,c,h,u,m,f,D){this._differs=t,this._changeDetectorRef=o,this._elementRef=s,this._dir=a,this._platform=c,this._viewRepeater=h,this._coalescedStyleScheduler=u,this._viewportRuler=m,this._stickyPositioningListener=f,this._ngZone=D,this._onDestroy=new ce.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasRendered=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new e.vpe,this.viewChange=new Ve.X({start:0,end:Number.MAX_VALUE}),i||s.nativeElement.setAttribute("role","table"),this._document=l,this._isServer=!c.isBrowser,this._isNativeHtmlTable="TABLE"===s.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((t,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o),this._viewportRuler.change().pipe((0,M.R)(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._hasRendered&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),(0,p.Z9)(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const o=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,o,(s,i,a)=>this._getEmbeddedViewArgs(s.item,a),s=>s.item.data,s=>{s.operation===p.dS.INSERTED&&s.context&&this._renderCellTemplateForItem(s.record.item.rowDef,s.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(s=>{o.get(s.currentIndex).context.$implicit=s.item.data}),this._updateNoDataRow(),this._ngZone&&e.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,ue.q)(1),(0,M.R)(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){const s=ge(this._headerRowOutlet,"thead");s&&(s.style.display=t.length?"":"none")}const o=this._headerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,o,"top"),this._headerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){const s=ge(this._footerRowOutlet,"tfoot");s&&(s.style.display=t.length?"":"none")}const o=this._footerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,o,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,o),this._footerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),o=this._getRenderedRows(this._rowOutlet),s=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...o,...s],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((i,a)=>{this._addStickyColumnStyles([i],this._headerRowDefs[a])}),this._rowDefs.forEach(i=>{const a=[];for(let l=0;l<o.length;l++)this._renderRows[l].rowDef===i&&a.push(o[l]);this._addStickyColumnStyles(a,i)}),s.forEach((i,a)=>{this._addStickyColumnStyles([i],this._footerRowDefs[a])}),Array.from(this._columnDefsByName.values()).forEach(i=>i.resetStickyChanged())}_outletAssigned(){!this._hasRendered&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasRendered=!0,this._render())}_render(){this._cacheRowDefs(),this._cacheColumnDefs();const o=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||o,this._forceRecalculateCellWidths=o,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){const t=[],o=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let s=0;s<this._data.length;s++){let i=this._data[s];const a=this._getRenderRowsForData(i,s,o.get(i));this._cachedRenderRowsMap.has(i)||this._cachedRenderRowsMap.set(i,new WeakMap);for(let l=0;l<a.length;l++){let c=a[l];const h=this._cachedRenderRowsMap.get(c.data);h.has(c.rowDef)?h.get(c.rowDef).push(c):h.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,o,s){return this._getRowDefs(t,o).map(a=>{const l=s&&s.has(a)?s.get(a):[];if(l.length){const c=l.shift();return c.dataIndex=o,c}return{data:t,rowDef:a,dataIndex:o}})}_cacheColumnDefs(){this._columnDefsByName.clear(),L(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(o=>{this._columnDefsByName.has(o.name),this._columnDefsByName.set(o.name,o)})}_cacheRowDefs(){this._headerRowDefs=L(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=L(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=L(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(o=>!o.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(a,l)=>a||!!l.getColumnsDiff(),o=this._rowDefs.reduce(t,!1);o&&this._forceRenderDataRows();const s=this._headerRowDefs.reduce(t,!1);s&&this._forceRenderHeaderRows();const i=this._footerRowDefs.reduce(t,!1);return i&&this._forceRenderFooterRows(),o||s||i}_switchDataSource(t){this._data=[],(0,p.Z9)(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;(0,p.Z9)(this.dataSource)?t=this.dataSource.connect(this):(0,Ke.b)(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=(0,de.of)(this.dataSource)),this._renderChangeSubscription=t.pipe((0,M.R)(this._onDestroy)).subscribe(o=>{this._data=o||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,o)=>this._renderRow(this._headerRowOutlet,t,o)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,o)=>this._renderRow(this._footerRowOutlet,t,o)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,o){const s=Array.from(o.columns||[]).map(l=>this._columnDefsByName.get(l)),i=s.map(l=>l.sticky),a=s.map(l=>l.stickyEnd);this._stickyStyler.updateStickyColumns(t,i,a,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const o=[];for(let s=0;s<t.viewContainer.length;s++){const i=t.viewContainer.get(s);o.push(i.rootNodes[0])}return o}_getRowDefs(t,o){if(1==this._rowDefs.length)return[this._rowDefs[0]];let s=[];if(this.multiTemplateDataRows)s=this._rowDefs.filter(i=>!i.when||i.when(o,t));else{let i=this._rowDefs.find(a=>a.when&&a.when(o,t))||this._defaultRowDef;i&&s.push(i)}return s}_getEmbeddedViewArgs(t,o){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:o}}_renderRow(t,o,s,i={}){const a=t.viewContainer.createEmbeddedView(o.template,i,s);return this._renderCellTemplateForItem(o,i),a}_renderCellTemplateForItem(t,o){for(let s of this._getCellTemplates(t))C.mostRecentCellOutlet&&C.mostRecentCellOutlet._viewContainer.createEmbeddedView(s,o);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let o=0,s=t.length;o<s;o++){const a=t.get(o).context;a.count=s,a.first=0===o,a.last=o===s-1,a.even=o%2==0,a.odd=!a.even,this.multiTemplateDataRows?(a.dataIndex=this._renderRows[o].dataIndex,a.renderIndex=o):a.index=this._renderRows[o].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,o=>{const s=this._columnDefsByName.get(o);return t.extractCellTemplate(s)}):[]}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(o,s)=>o||s.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new _t(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,de.of)()).pipe((0,M.R)(this._onDestroy)).subscribe(o=>{this._stickyStyler.direction=o,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(o=>!o._table||o._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const o=0===this._rowOutlet.viewContainer.length;if(o===this._isShowingNoDataRow)return;const s=this._noDataRowOutlet.viewContainer;if(o){const i=s.createEmbeddedView(t.templateRef),a=i.rootNodes[0];1===i.rootNodes.length&&a?.nodeType===this._document.ELEMENT_NODE&&(a.setAttribute("role","row"),a.classList.add(t._contentClassName))}else s.clear();this._isShowingNoDataRow=o,this._changeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.ZZ4),e.Y36(e.sBO),e.Y36(e.SBq),e.$8M("role"),e.Y36(Xe.Is,8),e.Y36(_.K0),e.Y36(Je.t4),e.Y36(p.k),e.Y36(z),e.Y36(le.rL),e.Y36(Q,12),e.Y36(e.R0b,8))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(o,s,i){if(1&o&&(e.Suo(i,B,5),e.Suo(i,w,5),e.Suo(i,N,5),e.Suo(i,E,5),e.Suo(i,O,5)),2&o){let a;e.iGM(a=e.CRH())&&(s._noDataRow=a.first),e.iGM(a=e.CRH())&&(s._contentColumnDefs=a),e.iGM(a=e.CRH())&&(s._contentRowDefs=a),e.iGM(a=e.CRH())&&(s._contentHeaderRowDefs=a),e.iGM(a=e.CRH())&&(s._contentFooterRowDefs=a)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(o,s){2&o&&e.ekj("cdk-table-fixed-layout",s.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[e.lbL.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",e.VuI],fixedLayout:[e.lbL.HasDecoratorInputTransform,"fixedLayout","fixedLayout",e.VuI]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[e._Bn([{provide:b,useExisting:n},{provide:p.k,useClass:p.yy},{provide:z,useClass:me},{provide:Q,useValue:null}]),e.Xq5,e.jDz],ngContentSelectors:it,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(o,s){1&o&&(e.F$t(st),e.Hsn(0),e.Hsn(1,1),e.YNc(2,tt,1,0)(3,nt,7,0)(4,ot,4,0)),2&o&&(e.xp6(2),e.um2(2,s._isServer?2:-1),e.xp6(),e.um2(3,s._isNativeHtmlTable?3:4))},dependencies:[J,X,V,W],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return n})();function L(n,r){return n.concat(Array.from(r))}function ge(n,r){const t=r.toUpperCase();let o=n.viewContainer.element.nativeElement;for(;o;){const s=1===o.nodeType?o.nodeName:null;if(s===t)return o;if("TABLE"===s)break;o=o.parentNode}return null}let pt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[le.Cl]})}return n})();var De=d(8111);function Dt(n,r){1&n&&e.Hsn(0,2)}function yt(n,r){1&n&&(e.TgZ(0,"thead",0),e.GkF(1,1),e.qZA(),e.TgZ(2,"tbody",2),e.GkF(3,3)(4,4),e.qZA(),e.TgZ(5,"tfoot",0),e.GkF(6,5),e.qZA())}function bt(n,r){1&n&&e.GkF(0,1)(1,3)(2,4)(3,5)}const wt=[[["caption"]],[["colgroup"],["col"]],"*"],Ct=["caption","colgroup, col","*"];let ye=(()=>{class n extends P{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(o,s){2&o&&e.ekj("mdc-table-fixed-layout",s.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[e._Bn([{provide:P,useExisting:n},{provide:b,useExisting:n},{provide:z,useClass:me},{provide:p.k,useClass:p.yy},{provide:Q,useValue:null}]),e.qOj,e.jDz],ngContentSelectors:Ct,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(o,s){1&o&&(e.F$t(wt),e.Hsn(0),e.Hsn(1,1),e.YNc(2,Dt,1,0)(3,yt,7,0)(4,bt,4,0)),2&o&&(e.xp6(2),e.um2(2,s._isServer?2:-1),e.xp6(),e.um2(3,s._isNativeHtmlTable?3:4))},dependencies:[J,X,V,W],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return n})(),K=(()=>{class n extends T{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matCellDef",""]],standalone:!0,features:[e._Bn([{provide:T,useExisting:n}]),e.qOj]})}return n})(),ee=(()=>{class n extends S{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[e._Bn([{provide:S,useExisting:n}]),e.qOj]})}return n})(),be=(()=>{class n extends I{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matFooterCellDef",""]],standalone:!0,features:[e._Bn([{provide:I,useExisting:n}]),e.qOj]})}return n})(),te=(()=>{class n extends w{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:[e.lbL.None,"matColumnDef","name"]},standalone:!0,features:[e._Bn([{provide:w,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),e.qOj]})}return n})(),ne=(()=>{class n extends G{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[e.qOj]})}return n})(),we=(()=>{class n extends he{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["mat-footer-cell"],["td","mat-footer-cell",""]],hostAttrs:[1,"mat-mdc-footer-cell","mdc-data-table__cell"],standalone:!0,features:[e.qOj]})}return n})(),oe=(()=>{class n extends H{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[e.qOj]})}return n})(),Ce=(()=>{class n extends E{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[e.lbL.None,"matHeaderRowDef","columns"],sticky:[e.lbL.None,"matHeaderRowDefSticky","sticky"]},standalone:!0,features:[e._Bn([{provide:E,useExisting:n}]),e.qOj]})}return n})(),ve=(()=>{class n extends O{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matFooterRowDef",""]],inputs:{columns:[e.lbL.None,"matFooterRowDef","columns"],sticky:[e.lbL.None,"matFooterRowDefSticky","sticky"]},standalone:!0,features:[e._Bn([{provide:O,useExisting:n}]),e.qOj]})}return n})(),Re=(()=>{class n extends N{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:[e.lbL.None,"matRowDefColumns","columns"],when:[e.lbL.None,"matRowDefWhen","when"]},standalone:!0,features:[e._Bn([{provide:N,useExisting:n}]),e.qOj]})}return n})(),xe=(()=>{class n extends j{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[e._Bn([{provide:j,useExisting:n}]),e.qOj,e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),Te=(()=>{class n extends U{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-footer-row"],["tr","mat-footer-row",""]],hostAttrs:["role","row",1,"mat-mdc-footer-row","mdc-data-table__row"],exportAs:["matFooterRow"],standalone:!0,features:[e._Bn([{provide:U,useExisting:n}]),e.qOj,e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),Se=(()=>{class n extends q{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[e._Bn([{provide:q,useExisting:n}]),e.qOj,e.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,s){1&o&&e.GkF(0,0)},dependencies:[C],encapsulation:2})}return n})(),Tt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[De.BQ,pt,De.BQ]})}return n})();var kt=d(5221);let Mt=(()=>{class n{transform(t,...o){return t(...o)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.Yjl({name:"wrapFn",type:n,pure:!0})}return n})();function Et(n,r){1&n&&(e.TgZ(0,"th",19),e.SDv(1,20),e.qZA())}function Ot(n,r){if(1&n&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(),e.Oqu(t.title)}}function Ft(n,r){1&n&&(e.TgZ(0,"td",22),e.SDv(1,23),e.qZA())}function At(n,r){if(1&n&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.hij(" Coste(",t.currency.currencySymbol,") ")}}function It(n,r){if(1&n&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(),e.Oqu(t.originalCost)}}function Nt(n,r){1&n&&e._UZ(0,"td",22)}function Bt(n,r){if(1&n&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(),e.hij(" ",t.name," ")}}function Pt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"span",26),e._uU(2),e.ALo(3,"number"),e.ALo(4,"wrapFn"),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.oxw().$implicit,s=e.oxw();e.xp6(),e.ekj("debt",!t.paidBy.includes(o.id)),e.xp6(),e.hij(" ",e.xi3(3,3,e.Dn7(4,6,s.calculateExpenseBalance,t,o.id),".0-2")," ")}}function Lt(n,r){if(1&n&&(e.TgZ(0,"td",21),e.YNc(1,Pt,5,10,"ng-container",25),e.qZA()),2&n){const t=r.$implicit,o=e.oxw().$implicit;e.xp6(),e.Q6J("ngIf",t.sharedBy.includes(o.id))}}function Zt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"span",26),e._uU(2),e.qZA(),e.BQk()),2&n){const t=r.ngIf;e.xp6(),e.ekj("debt",t<"0"),e.xp6(),e.hij(" ",t," ")}}function $t(n,r){if(1&n&&(e.TgZ(0,"td",22),e.YNc(1,Zt,3,3,"ng-container",25),e.ALo(2,"number"),e.ALo(3,"wrapFn"),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw();e.xp6(),e.Q6J("ngIf",e.xi3(2,1,e.Dn7(3,4,o.calcUserTotalBalance,t.id,o.expenses$),".0-2"))}}function Gt(n,r){1&n&&(e.ynx(0,24),e.YNc(1,Bt,2,1,"th",11)(2,Lt,2,1,"td",12)(3,$t,4,8,"td",13),e.BQk()),2&n&&e.Q6J("matColumnDef",r.$implicit.name)}function Ht(n,r){1&n&&e._UZ(0,"tr",27)}function zt(n,r){1&n&&e._UZ(0,"tr",28)}function Yt(n,r){1&n&&e._UZ(0,"tr",29)}const jt=[{path:"",component:Ue},{path:"details",component:(()=>{class n{constructor(t,o,s){this.userService=t,this.currencyService=o,this.expensesService=s,this.currency=this.currencyService.getCurrencySettings(),this.displayedColumns=[]}ngOnInit(){this.initColumns(),this.initExpenses()}initExpenses(){this.expensesService.getIterableExpenses().subscribe(t=>{this.expenses$=t})}initColumns(){this.userService.getIterableUsers().subscribe(t=>{this.users$=t;const o=t.map(s=>s.name);this.displayedColumns=["title","originalCost",...o]})}calcUserTotalBalance(t,o){let s=0;return o.forEach(i=>{const a=t===i.paidBy,l=i.sharedBy.includes(t);a&&(s+=i.originalCost),l&&(s-=i.cost)}),s}calculateExpenseBalance(t,o){let s=-t.cost;const i=o===t.paidBy,a=t.sharedBy.includes(o);return i&&(s+=t.originalCost,a||(s+=t.cost)),s}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(ae.f),e.Y36(qe.ie),e.Y36(Qe.r))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-debts-detail"]],decls:26,vars:7,consts:()=>{let t,o,s;return t="Balance de cuentas",o=" Descripci\xF3n ",s="Total",[[1,"mt-4","mb-5","container-fluid"],[1,"my-4","text-center"],t,["name","file",1,"my-icon"],["name","home",1,"my-icon"],["name","menu",1,"my-icon"],["name","user-check",1,"my-icon"],["name","home","color","red",3,"size","strokeWidth"],[1,"mat-elevation-z8","mat-table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","data-label","id",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","originalCost"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell","","data-label","id"],o,["mat-cell",""],["mat-footer-cell",""],s,[3,"matColumnDef"],[4,"ngIf"],[1,"expense-cost"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]]},template:function(o,s){1&o&&(e.TgZ(0,"section",0)(1,"h2",1),e.SDv(2,2),e.qZA(),e._UZ(3,"lucide-angular",3)(4,"lucide-icon",4)(5,"i-lucide",5)(6,"span-lucide",6)(7,"i-lucide",7),e.TgZ(8,"div",8)(9,"table",9),e.ynx(10,10),e.YNc(11,Et,2,0,"th",11)(12,Ot,2,1,"td",12)(13,Ft,2,0,"td",13),e.BQk(),e.ynx(14,14),e.YNc(15,At,2,1,"th",11)(16,It,2,1,"td",12)(17,Nt,1,0,"td",13),e.BQk(),e.YNc(18,Gt,4,1,"ng-container",15)(19,Ht,1,0,"tr",16)(20,zt,1,0,"tr",17)(21,Yt,1,0,"tr",18),e.qZA()()(),e._UZ(22,"br")(23,"br")(24,"br")(25,"br")),2&o&&(e.xp6(7),e.Q6J("size",48)("strokeWidth",3),e.xp6(2),e.Q6J("dataSource",s.expenses$),e.xp6(9),e.Q6J("ngForOf",s.users$),e.xp6(),e.Q6J("matHeaderRowDef",s.displayedColumns),e.xp6(),e.Q6J("matRowDefColumns",s.displayedColumns),e.xp6(),e.Q6J("matFooterRowDef",s.displayedColumns))},dependencies:[_.sg,_.O5,ye,ee,Ce,te,K,Re,be,ve,ne,oe,we,xe,Se,Te,kt.Nh5,_.JJ,Mt],styles:[".mat-table-responsive[_ngcontent-%COMP%]{overflow-x:auto}@media (max-width: 600px){.mat-table-responsive[_ngcontent-%COMP%]{overflow-x:scroll}.mat-column-nombre[_ngcontent-%COMP%], .mat-column-edad[_ngcontent-%COMP%], .mat-column-direccion[_ngcontent-%COMP%]{display:block;width:100%;text-align:center}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{display:block;text-align:center;border-bottom:1px solid rgba(0,0,0,.12)}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700}}th.mat-mdc-header-cell[_ngcontent-%COMP%]{font-weight:700}tr.mat-mdc-footer-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:large}tr.mat-mdc-footer-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:700}.expense-cost[_ngcontent-%COMP%]{color:#00796b;font-weight:bolder}.expense-cost.debt[_ngcontent-%COMP%]{color:#d84315}"],changeDetection:0})}return n})()}];let Ut=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[k.Bz.forChild(jt),k.Bz]})}return n})();var qt=d(8582),Qt=d(7978);const Wt=(0,g.Lq)({debts:new Map},(0,g.on)(ie,(n,{debts:r})=>({...n,debts:new Map([...n.debts,...r])})));let Vt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[re],imports:[qt.u5,_.ez,Ut,Tt,Qt.m,g.Aw.forFeature("debts",Wt)]})}return n})()},3057:(Me,A,d)=>{d.d(A,{u:()=>k});var _=d(6530),g=d(1498);let k=(()=>{class v{constructor(R){this.currencyService=R}transform(R=0){return R*this.currencyService.getCurrencySettings().exchangeValue}static#e=this.\u0275fac=function(x){return new(x||v)(g.Y36(_.i,16))};static#t=this.\u0275pipe=g.Yjl({name:"exchange",type:v,pure:!0})}return v})()}}]);