"use strict";(self.webpackChunksplitexpenses=self.webpackChunksplitexpenses||[]).push([[592],{6938:(b,T,r)=>{r.d(T,{H:()=>s});var S=r(5649),U=r(2340),t=r(2223),l=r(3249);let s=(()=>{class h{constructor(n){this.storageService=n,this.bytype="false",this.data={labels:[""],data:[]},this.filter="",this.barChartOptions={responsive:!0,scales:{x:{stacked:!0},y:{min:0,stacked:!0}},plugins:{tooltip:{},legend:{display:!1},title:{display:!0,text:""}}},this.barChartType="bar",this.barChartPlugins=[],this.barChartData={labels:[],datasets:[{data:[],label:"",borderColor:"yellow",backgroundColor:["rgba(222,225,38,0.68)"]}]},this.settings=this.storageService.getSettings()}ngOnChanges(n){"ByType"===this.bytype?this.calcByType():"weather"===this.bytype?this.weatherChart():this.calcByDay(),this.chart?.update()}ngOnInit(){"ByType"===this.bytype?this.calcByType():"weather"===this.bytype?this.weatherChart():this.calcByDay()}chartClicked({active:i}){if("true"===this.bytype){let c=i?.pop();console.log(c),this.filter=c?U.N.expensesTypes[c.index]:""}}chartHovered({}){}calcByType(n){this.barChartData.datasets[0].label="",this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Gasto acumulado por tipo"),this.barChartData.datasets[0].backgroundColor=this.settings.graph.bgColors,this.barChartData.datasets[0].data=this.data.data,this.barChartData.labels=this.data.labels}calcByDay(){this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Gasto diario"),this.barChartData.datasets=this.data.data,this.barChartData.labels=this.data.labels.map(n=>new Date(n).toLocaleDateString("ES",{weekday:"short",day:"numeric"}))}weatherChart(){this.barChartData.labels=this.data.labels,this.barChartType="line",this.barChartData.datasets[0].data=this.data.data,this.barChartData.datasets[0].fill=!0,this.barChartOptions?.scales&&this.barChartOptions.scales.y&&(this.barChartOptions.scales.y.max=35),this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Previsi\xF3n")}}return h.\u0275fac=function(n){return new(n||h)(t.Y36(l.g))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-summarygraph"]],viewQuery:function(n,i){if(1&n&&t.Gf(S.jh,5),2&n){let c;t.iGM(c=t.CRH())&&(i.chart=c.first)}},inputs:{bytype:"bytype",data:"data"},features:[t.TTD],decls:2,vars:4,consts:[[1,"mb-3"],["baseChart","",3,"data","options","plugins","type","chartHover","chartClick"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"canvas",1),t.NdJ("chartHover",function(u){return i.chartHovered(u)})("chartClick",function(u){return i.chartClicked(u)}),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("data",i.barChartData)("options",i.barChartOptions)("plugins",i.barChartPlugins)("type",i.barChartType))},dependencies:[S.jh]}),h})()},3975:(b,T,r)=>{r.d(T,{J:()=>c});var S=r(5861),U=r(3905),t=r(2134),l=r(9401),s=r(2223),h=r(7024),g=r(2342),n=r(8097),i=r(9114);let c=(()=>{class u{constructor(d,o,m){this.userService=d,this._snackBar=o,this.fb=m,this.userForm=this.fb.group({user:["",[l.kI.required]],phone:[""]}),this.toastmsg={OK:"Guardado correctamente",KO:"Error fatal",EXIST:"Usuario ya existe"}}ngOnInit(){}onSubmit(d){var o=this;return(0,S.Z)(function*(){const{user:m,phone:f}=d;(yield(0,U.z)(o.userService.checkIfNameExist(m)))?(0,t.jW)(o._snackBar,t.dR.EXIST,o.toastmsg.EXIST):(o.userService.addUser({id:"",name:m,phone:f}),(0,t.jW)(o._snackBar,t.dR.OK,o.toastmsg.OK),o.resetForm())})()}resetForm(){this.userForm.reset()}}return u.\u0275fac=function(d){return new(d||u)(s.Y36(h.f),s.Y36(g.ux),s.Y36(l.qu))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-add-user"]],decls:16,vars:2,consts:function(){let y,d,o,m;return y="Administraci\xF3n de usuarios",d="Nombre usuario",o="whatsApp number (optional)",m=" A\xF1adir Usuario ",[[1,"my-4","text-center"],y,[3,"formGroup","ngSubmit"],[1,"mb-2","row","g-4","users"],[1,"col-6"],["appearance","fill",1,"w-100"],d,["matInput","","formControlName","user"],o,["matInput","","formControlName","phone","type","number"],["type","submit",1,"input-group","btn","mb-5","btn-primary","p-2",3,"disabled"],m]},template:function(d,o){1&d&&(s.TgZ(0,"h2",0),s.SDv(1,1),s.qZA(),s.TgZ(2,"form",2),s.NdJ("ngSubmit",function(){return o.onSubmit(o.userForm.value)}),s.TgZ(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),s.SDv(7,6),s.qZA(),s._UZ(8,"input",7),s.qZA()(),s.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),s.SDv(12,8),s.qZA(),s._UZ(13,"input",9),s.qZA()()(),s.TgZ(14,"button",10),s.SDv(15,11),s.qZA()()),2&d&&(s.xp6(2),s.Q6J("formGroup",o.userForm),s.xp6(12),s.Q6J("disabled",!o.userForm.valid))},dependencies:[l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,n.Nt,i.KE,i.hX]}),u})()},3563:(b,T,r)=>{r.r(T),r.d(T,{UsersModule:()=>M});var S=r(4755),U=r(506),t=r(2223),l=r(2134),s=r(7024),h=r(2342),g=r(1728);function n(e,_){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td",5,6),t.NdJ("focusout",function(){const E=t.CHM(a).$implicit,C=t.MAs(2),D=t.oxw(2);return t.KtG(D.edit(C,E,"name"))}),t._uU(3),t.qZA(),t.TgZ(4,"td",5,7),t.NdJ("focusout",function(){const E=t.CHM(a).$implicit,C=t.MAs(5),D=t.oxw(2);return t.KtG(D.edit(C,E,"phone"))}),t._uU(6),t.qZA(),t.TgZ(7,"td",8),t.NdJ("click",function(){const E=t.CHM(a).$implicit,C=t.oxw(2);return t.KtG(C.delete(E.id))}),t.TgZ(8,"button",9)(9,"span",10),t._uU(10,"delete_forever"),t.qZA()()()()}if(2&e){const a=_.$implicit;t.xp6(3),t.hij(" ",a.name," "),t.xp6(3),t.hij(" ",a.phone,"")}}function i(e,_){if(1&e&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"th"),t.SDv(4,2),t.qZA(),t.TgZ(5,"th"),t.SDv(6,3),t.qZA(),t.TgZ(7,"th"),t._uU(8," - "),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,n,11,2,"tr",4),t.ALo(11,"async"),t.qZA()()),2&e){const a=t.oxw();t.xp6(10),t.Q6J("ngForOf",t.lcZ(11,1,a.users$))}}let c=(()=>{class e{constructor(a,p){this.userService=a,this._snackBar=p,this.toastmsg={OK:"Guardado correctamente",KO:"Error fatal",EXIST:"Usuario ya existe"},this.users$=this.userService.getIterableUsers()}ngOnInit(){}edit(a,p,A){let E=p[A];const C=a.innerText.trim();C&&E!=C?(p[A]=C,this.userService.editUser(p),(0,l.jW)(this._snackBar,l.dR.OK,this.toastmsg.OK)):a.innerText=E||""}delete(a){this.userService.removeUser(a),(0,l.jW)(this._snackBar,l.dR.OK,"Usuario borrado")}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(s.f),t.Y36(h.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users-list"]],decls:1,vars:1,consts:function(){let _,a;return _="Nombre",a="Telf",[["class","table table-striped mt-4",4,"ngIf"],[1,"table","table-striped","mt-4"],_,a,[4,"ngFor","ngForOf"],["contentEditable","",3,"focusout"],["nameCell",""],["phoneCell",""],[3,"click"],["mat-mini-fab","","color","warn"],[1,"material-icons"]]},template:function(a,p){1&a&&t.YNc(0,i,12,3,"table",0),2&a&&t.Q6J("ngIf",p.users$)},dependencies:[S.sg,S.O5,g.nh,S.Ov]}),e})();var u=r(3975);const d=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],decls:3,vars:0,consts:[[1,"container"]],template:function(a,p){1&a&&(t.TgZ(0,"main",0),t._UZ(1,"app-add-user")(2,"app-users-list"),t.qZA())},dependencies:[c,u.J]}),e})()},{path:"list",component:c},{path:"add",component:u.J}];let o=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[U.Bz.forChild(d),U.Bz]}),e})();var m=r(9401),f=r(4466);let M=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[s.f],imports:[S.ez,o,h.ZX,m.u5,m.UX,f.m]}),e})()}}]);