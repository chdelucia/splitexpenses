
<section class="mt-4 mb-5 container-fluid">
  <h2 class="my-4 text-center" i18n>Balance de cuentas</h2>

  <div class="mat-elevation-z8 mat-table-responsive">

    <table mat-table [dataSource]="expenses$" >

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef data-label="id"> Title </th>
        <td mat-cell *matCellDef="let expense"> {{expense.title}}</td>
        <td mat-footer-cell *matFooterCellDef> Total </td>
      </ng-container>

      <!--
      <ng-container matColumnDef="paidBy">
        <th mat-header-cell *matHeaderCellDef data-label="id"> Pagador </th>
        <td mat-cell *matCellDef="let expense"> {{(users | async)?.get(expense.paidBy)?.name}}</td>
        <td mat-footer-cell *matFooterCellDef>  </td>
      </ng-container>
      Columna "QuiÃ©n ha pagado la factura" -->

      <ng-container matColumnDef="originalCost">
        <th mat-header-cell *matHeaderCellDef data-label="id"> Coste({{currency.currencySymbol}})</th>
        <td mat-cell *matCellDef="let expense"> {{expense.originalCost}} </td>
        <td mat-footer-cell *matFooterCellDef>  </td>
      </ng-container>

      <ng-container *ngFor="let user of users$ | async" [matColumnDef]="user.name">
        <th mat-header-cell *matHeaderCellDef data-label="id"> {{user.name}} </th>
        <td mat-cell *matCellDef="let expense">
          <ng-container *ngIf="expense.sharedBy.includes(user.id)" >
            <span class="expense-cost" [class.debt]="getTotalUserPaid(expense, user.id) < 0">
              {{getTotalUserPaid(expense, user.id)}}
            </span>

          </ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef>
          <span class="expense-cost" [class.debt]="getTotalAmount(user.id) < 0">
            {{getTotalAmount(user.id)}}
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let expense; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>


    </table>

  </div>

</section>
<button mat-raised-button color="primary" (click)="exportToExcel()">Exportar a Excel</button>


<br><br><br><br>


