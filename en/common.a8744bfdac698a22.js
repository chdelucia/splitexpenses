"use strict";(self.webpackChunksplitexpenses=self.webpackChunksplitexpenses||[]).push([[592],{648:(D,T,e)=>{e.d(T,{H:()=>m});var h=e(6128),U=e(3890),t=e(1498);let m=(()=>{class o{constructor(d){this.storageService=d,this.bytype="false",this.data={labels:[""],data:[]},this.filter="",this.barChartOptions={responsive:!0,scales:{x:{stacked:!0},y:{min:0,stacked:!0}},plugins:{tooltip:{},legend:{display:!1},title:{display:!0,text:""}}},this.barChartType="bar",this.barChartPlugins=[],this.barChartData={labels:[],datasets:[{data:[],label:"",borderColor:"yellow",backgroundColor:["rgba(222,225,38,0.68)"]}]},this.settings=this.storageService.getSettings()}ngOnChanges(){"ByType"===this.bytype?this.calcByType():"weather"===this.bytype?this.weatherChart():this.calcByDay(),this.chart?.update()}ngOnInit(){"ByType"===this.bytype?this.calcByType():"weather"===this.bytype?this.weatherChart():this.calcByDay()}calcByType(){this.barChartData.datasets[0].label="",this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Gasto acumulado por tipo"),this.barChartData.datasets[0].backgroundColor=this.settings.graph.bgColors,this.barChartData.datasets[0].data=this.data.data,this.barChartData.labels=this.data.labels}calcByDay(){this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Daily expenses"),this.barChartData.datasets=this.data.data,this.barChartData.labels=this.data.labels.map(d=>new Date(d).toLocaleDateString("ES",{weekday:"short",day:"numeric"}))}weatherChart(){this.barChartData.labels=this.data.labels,this.barChartType="line",this.barChartData.datasets[0].data=this.data.data,this.barChartData.datasets[0].fill=!0,this.barChartOptions?.scales&&this.barChartOptions.scales.y&&(this.barChartOptions.scales.y.max=35),this.barChartOptions?.plugins?.title&&(this.barChartOptions.plugins.title.text="Forecast")}static#t=this.\u0275fac=function(l){return new(l||o)(t.Y36(U.g))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-summarygraph"]],viewQuery:function(l,c){if(1&l&&t.Gf(h.jh,5),2&l){let C;t.iGM(C=t.CRH())&&(c.chart=C.first)}},inputs:{bytype:"bytype",data:"data"},features:[t.TTD],decls:2,vars:4,consts:[[1,"mb-3"],["baseChart","",3,"data","options","plugins","type"]],template:function(l,c){1&l&&(t.TgZ(0,"div",0),t._UZ(1,"canvas",1),t.qZA()),2&l&&(t.xp6(),t.Q6J("data",c.barChartData)("options",c.barChartOptions)("plugins",c.barChartPlugins)("type",c.barChartType))},dependencies:[h.jh]})}return o})()},5361:(D,T,e)=>{e.d(T,{J:()=>C});var h=e(3356),U=e(4933),t=e(4099),m=e(7596),o=e(8582),s=e(1498),d=e(2556),l=e(5262),c=e(1570);let C=(()=>{class g{constructor(i,_){this.userService=i,this._snackBar=_,this.userForm=new o.cw({user:new o.NI("",[o.kI.required]),phone:new o.NI("")}),this.toastmsg={OK:"Saved successfully",KO:"Fatal error",EXIST:"User already exists"}}onSubmit(){var i=this;return(0,h.Z)(function*(){if(i.userForm.value.user){const{user:_,phone:u}=i.userForm.value;if(yield(0,U.z)(i.userService.checkIfNameExist(_)))return void(0,m.jW)(i._snackBar,m.dR.EXIST,i.toastmsg.EXIST);i.userService.addUser({id:"",name:_,phone:u||void 0}),(0,m.jW)(i._snackBar,m.dR.OK,i.toastmsg.OK),i.resetForm()}})()}resetForm(){this.userForm.reset()}static#t=this.\u0275fac=function(_){return new(_||g)(s.Y36(t.f),s.Y36(d.ux))};static#e=this.\u0275cmp=s.Xpm({type:g,selectors:[["app-add-user"]],decls:16,vars:2,consts:()=>{let i,_,u,A;return i="Users administration",_="Nombre usuario",u="whatsApp number (optional)",A="Add User",[[1,"my-4","text-center"],i,[3,"formGroup","ngSubmit"],[1,"mb-2","row","g-4","users"],[1,"col-6"],["appearance","fill",1,"w-100"],_,["matInput","","formControlName","user"],u,["matInput","","formControlName","phone","type","number"],["type","submit",1,"input-group","btn","mb-5","btn-primary","p-2",3,"disabled"],A]},template:function(_,u){1&_&&(s.TgZ(0,"h2",0),s.SDv(1,1),s.qZA(),s.TgZ(2,"form",2),s.NdJ("ngSubmit",function(){return u.onSubmit()}),s.TgZ(3,"div",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),s.SDv(7,6),s.qZA(),s._UZ(8,"input",7),s.qZA()(),s.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),s.SDv(12,8),s.qZA(),s._UZ(13,"input",9),s.qZA()()(),s.TgZ(14,"button",10),s.SDv(15,11),s.qZA()()),2&_&&(s.xp6(2),s.Q6J("formGroup",u.userForm),s.xp6(12),s.Q6J("disabled",!u.userForm.valid))},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u,l.Nt,c.KE,c.hX]})}return g})()},5845:(D,T,e)=>{e.r(T),e.d(T,{UsersModule:()=>f});var h=e(4361),U=e(9404),t=e(1498),m=e(4099),o=e(7596),s=e(2556),d=e(5084);function l(a,R){if(1&a){const r=t.EpF();t.TgZ(0,"tr")(1,"td",5,6),t.NdJ("focusout",function(){const E=t.CHM(r).$implicit,S=t.MAs(2),b=t.oxw(2);return t.KtG(b.edit(S,E,"name"))}),t._uU(3),t.qZA(),t.TgZ(4,"td",5,7),t.NdJ("focusout",function(){const E=t.CHM(r).$implicit,S=t.MAs(5),b=t.oxw(2);return t.KtG(b.edit(S,E,"phone"))}),t._uU(6),t.qZA(),t.TgZ(7,"td",8),t.NdJ("click",function(){const E=t.CHM(r).$implicit,S=t.oxw(2);return t.KtG(S.delete(E.id))}),t.TgZ(8,"button",9)(9,"span",10),t._uU(10,"delete_forever"),t.qZA()()()()}if(2&a){const r=R.$implicit;t.xp6(3),t.hij(" ",r.name," "),t.xp6(3),t.hij(" ",r.phone," ")}}function c(a,R){if(1&a&&(t.TgZ(0,"table",1)(1,"thead")(2,"tr")(3,"th"),t.SDv(4,2),t.qZA(),t.TgZ(5,"th"),t.SDv(6,3),t.qZA(),t.TgZ(7,"th"),t._uU(8,"-"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,l,11,2,"tr",4),t.ALo(11,"async"),t.qZA()()),2&a){const r=t.oxw();t.xp6(10),t.Q6J("ngForOf",t.lcZ(11,1,r.users$))}}let C=(()=>{class a{constructor(r,n){this.userService=r,this._snackBar=n,this.toastmsg={OK:"Saved successfully",KO:"Fatal error",EXIST:"User already exists"},this.users$=this.userService.getIterableUsers()}edit(r,n,p){const E=n[p],S=r.innerText.trim();S&&E!=S?(n[p]=S,this.userService.editUser(n),(0,o.jW)(this._snackBar,o.dR.OK,this.toastmsg.OK)):r.innerText=E??""}delete(r){this.userService.removeUser(r),(0,o.jW)(this._snackBar,o.dR.OK,"Usuario borrado")}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(m.f),t.Y36(s.ux))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-users-list"]],decls:1,vars:1,consts:()=>{let r,n;return r="Name",n="Phone",[["class","table table-striped mt-4",4,"ngIf"],[1,"table","table-striped","mt-4"],r,n,[4,"ngFor","ngForOf"],["contentEditable","",3,"focusout"],["nameCell",""],["phoneCell",""],[3,"click"],["mat-mini-fab","","color","warn"],[1,"material-icons"]]},template:function(n,p){1&n&&t.YNc(0,c,12,3,"table",0),2&n&&t.Q6J("ngIf",p.users$)},dependencies:[h.sg,h.O5,d.nh,h.Ov]})}return a})();var g=e(5361);const i=[{path:"",component:(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-users"]],decls:3,vars:0,consts:[[1,"container"]],template:function(n,p){1&n&&(t.TgZ(0,"main",0),t._UZ(1,"app-add-user")(2,"app-users-list"),t.qZA())},dependencies:[C,g.J]})}return a})()},{path:"list",component:C},{path:"add",component:g.J}];let _=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#s=this.\u0275inj=t.cJS({imports:[U.Bz.forChild(i),U.Bz]})}return a})();var u=e(8582),A=e(7978);let f=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#s=this.\u0275inj=t.cJS({providers:[m.f],imports:[h.ez,_,s.ZX,u.u5,u.UX,A.m]})}return a})()}}]);